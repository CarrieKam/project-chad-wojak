<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta property="og:title" content="Personal Portfolio" />
    <meta property="og:description" content="My Personal Portfolio" />
    <meta property="og:url" content="{{ url }}" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,200;0,400;1,200&display=swap"
      rel="stylesheet"
    />
    <!-- animate.css for simple animations -->
    <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
  />
    <!-- JS for animation logic -->
    <script src="./static/scripts/animateHelper.js"></script>
    <script>
        // orders the page names
        const pages = { 
            "about": 0,
            "education": 1,
            "hobbies": 2,
            "where-am-i": 3
        };
        // this function returns an event handler
        const animateOut = (node, currPage, nextPage, e) => {
            e.preventDefault();
            // if >0, we are moving right, so animate left
            const anim = pages[nextPage] - pages[currPage] > 0 ? 'slideOutLeft' : 'slideOutRight';

            // remove `animate__delay-5s` from .content-wrapper (it might be there from the initial page load)
            const content = document.querySelector('.content-wrapper');
            content.classList.remove('animate__delay-5s');

            // Now, add the animation to the element
            animateCSS('.content-wrapper', anim).then((message) => {
                // finish redirect
                // make sure the content is hidden after it animates out
                content.style.visibility = 'hidden';
                window.location = node.href;
            }).catch((error) => {
                console.log(error);
            });
            
        }
    </script>
    <link lang="css" rel="stylesheet" href="./static/styles/main.css" />
    <link lang="css" rel="stylesheet" href="./static/styles/profile.css" />
    {% block imports %}{% endblock %}
    <link rel="icon" href="./static/img/favicon.ico" type="image/x-icon" />
    <title>{{ title }}</title>
  </head>

  <body>
    <!-- play animations if it is the initial page load -->
    <div class="profile">
      <div class="profile-picture {{ 'animate__animated animate__fadeInUp' if initial }}">
        <img src="./static/img/logo.jpg" />
      </div>
      <div class="profile-description">
        <h1 class="profile-name {{ 'animate__animated animate__fadeInUp animate__delay-1s' if initial }}">{{ name }}</h1>
        <p class="profile-position {{ 'animate__animated animate__fadeInUp animate__delay-2s' if initial }}">{{ position }}</p>
        <div class="socials {{ 'animate__animated animate__fadeInUp animate__delay-3s' if initial }}">
          {% for social in socials %}
          <a class="socials-link" href="{{social.url}}" target="_blank">
            <img src="{{social.icon}}" alt="{{social.name}}" />
          </a>
          {% endfor %}
        </div>
      </div>
    </div>
    <div class="nav-bar-wrapper {{ 'animate__animated animate__fadeInUp animate__delay-4s' if initial }}">
      <div class="nav-bar">
        <a class="nav-item {{'active' if active_tab == 'about'}}" onclick="animateOut(this, '{{ active_tab }}', 'about', event)" href="/about">About</a>
        <a class="nav-item {{'active' if active_tab == 'education' }}" onclick="animateOut(this, '{{ active_tab }}', 'education', event)" href="/education">Education</a>
        <a class="nav-item {{'active' if active_tab == 'hobbies' }}" onclick="animateOut(this, '{{ active_tab }}', 'hobbies', event)" href="/hobbies">Hobbies</a >
        <a class="nav-item {{'active' if active_tab == 'where-am-i' }}" onclick="animateOut(this, '{{ active_tab }}', 'where-am-i', event)" href="/where-am-i">Where Am I?</a>
      </div>
    </div>
    <div 
        class="content-wrapper 
            {{ 'animate__animated animate__fadeInUp animate__delay-5s' if initial }}
            {{ 'animate__animated animate__faster ' ~ content_slide_animation if content_slide_animation is not none }}">
        {% block content %}{% endblock %}
    </div>
    <footer>
      <p>&#169 Copyright Chad-wojak. 2022 All rights reserved</p>
    </footer>
  </body>
</html>
